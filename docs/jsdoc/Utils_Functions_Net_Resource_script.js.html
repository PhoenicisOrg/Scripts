<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Utils/Functions/Net/Resource/script.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Utils/Functions/Net/Resource/script.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>include(["utils", "functions", "net", "download"]);
include(["Utils", "Functions", "filesystem", "files"]);

/* exported Resource */
var Resource = function () {
    var that = this;
    this._algorithm = "SHA";
    this._resourcesPath = Bean("propertyReader").getProperty("application.user.resources");
    this._directory = "";

    that.wizard = function(wizard) {
        that._wizard = wizard;
        return that;
    };

    that.algorithm = function(algorithm) {
        that._algorithm = algorithm;
        return that;
    };

    that.name = function (name) {
        that._name = name;
        return that;
    };

    that.checksum = function (checksum) {
        that._checksum = checksum;
        return that;
    };

    that.url = function(url) {
        that._url = url;
        return that;
    };

    /**
     * directory inside the resource directory where the Resource is stored
     * @param {string} directory
     * @returns {Resource}
     */
    that.directory = function(directory) {
        that._directory = directory;
        return that;
    };

    that.get = function () {
        if (!that._message) {
            that._message = tr("Please wait while {0} is downloaded ...", that._name);
        }

        var resourcesPath = that._resourcesPath + "/" + that._directory;
        mkdir(resourcesPath);

        var resourcePath = resourcesPath + "/" + that._name;

        if (fileExists(resourcePath)) {
            var fileChecksum = new Checksum()
                .wizard(that._wizard)
                .of(resourcePath)
                .method(that._algorithm)
                .get();

            if(fileChecksum == that._checksum) {
                return resourcePath;
            }
        }

        new Downloader()
            .url(that._url)
            .wizard(that._wizard)
            .message(that._message)
            .checksum(that._checksum)
            .algorithm(that._algorithm)
            .to(resourcePath)
            .get();

        return resourcePath;
    }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ConfigureWine.html">ConfigureWine</a></li><li><a href="KillWineProcesses.html">KillWineProcesses</a></li><li><a href="RebootWine.html">RebootWine</a></li><li><a href="RepairWinePrefix.html">RepairWinePrefix</a></li><li><a href="Wine.html">Wine</a></li><li><a href="WineConsole.html">WineConsole</a></li><li><a href="WineRegistryEditor.html">WineRegistryEditor</a></li><li><a href="WineTaskManager.html">WineTaskManager</a></li><li><a href="WineTerminalOpener.html">WineTerminalOpener</a></li><li><a href="WineUninstaller.html">WineUninstaller</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
